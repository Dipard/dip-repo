<?php// Менеджер статей//class M_Articles{	private static $instance; 	// ссылка на экземпляр класса	private $msql; 				// драйвер БД		//	// Получение единственного экземпляра (одиночка)	//	public static function Instance()	{		if (self::$instance == null)			self::$instance = new M_Articles();				return self::$instance;	}	//	// Конструктор	//	public function __construct()	{		$this->msql = M_MSQL::Instance();	}		//	// Список всех статей	//	public function articles_all()	{		$query = "SELECT * 				  FROM articles 				  ORDER BY id_article DESC";				  		return $this->msql->Select($query);	}	public function articles_latests(){		$query = "SELECT * 				  FROM articles 				  ORDER BY id_article DESC				  LIMIT 2";				  		return $this->msql->Select($query);	}	public function comments_get($id_article){		$t="SELECT *			FROM comments			WHERE id_article='%d'";		$query=sprintf($t, $id_article);		return $this->msql->Select($query);	}	//	// Конкретная статья	//	public function articles_get($id_article)	{		// Запрос.		$t = "SELECT * 			  FROM articles 			  WHERE id_article = '%d'";			  		$query = sprintf($t, $id_article);		$result = $this->msql->Select($query);		return $result[0];	}	//	// Добавить статью	//	public function articles_new($title, $content)	{		// Подготовка.		$title = trim($title);		$content = trim($content);		// Проверка.		if ($title == '')			return false;				// Запрос.		$obj = array();		$obj['title'] = $title;		$obj['content'] = $content;				$this->msql->Insert('articles', $obj);		return true;	}	public function comment_new($name,$text,$id_article)	{		$name = trim($name);		$text = trim($text);		// Проверка.		if ($name == '')			return false;				// Запрос.		$obj = array();		$obj['id_article']=$id_article;		$obj['name'] = $name;		$obj['text'] = $text;				$this->msql->Insert('comments', $obj);		return true;	}	//	// Изменить статью	//	public function articles_edit($id_article, $title, $content)	{		// Подготовка.		$title = trim($title);		$content = trim($content);		// Проверка.		if ($title == '')			return false;				// Запрос.		$obj = array();		$obj['title'] = $title;		$obj['content'] = $content;				$t = "id_article = '%d'";				$where = sprintf($t, $id_article);				$this->msql->Update('articles', $obj, $where);		return true;	}	//	// Удалить статью	//	public function articles_delete($id_article)	{		// Запрос.		$t = "id_article = '%d'";				$where = sprintf($t, $id_article);				$this->msql->Delete('articles', $where);		return true;	}	public function comments_delete($id_comment,$id_article)	{		// Запрос.		$t = "id_article = '%d'";				$where = sprintf($t, $id_article);				$this->msql->Delete('comments', $where);		return true;	}	//	// Сокращенная статья	//	function articles_intro($article)	{		@$textart=$article['content'];		$article=substr($textart,0,100);		return $article;	}	//	//Последние статьи	//}